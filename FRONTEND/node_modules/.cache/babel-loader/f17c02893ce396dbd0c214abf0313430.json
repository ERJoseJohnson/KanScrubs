{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Jose Johnson\\\\Desktop\\\\KanScrubs\\\\FRONTEND\\\\src\\\\App (2).js\";\nimport React from 'react';\nimport './App.css';\nimport Chatbox from \"./chat_ui/Chatbox\";\nimport \"tachyons\";\nimport Login_n from \"./login/Login_n\";\nimport axios from \"axios\";\nimport rainbowSDK from 'rainbow-web-sdk';\n\nclass App extends React.Component {\n  constructor() {\n    super();\n\n    this.onReady = () => {\n      var myRainbowLogin = \"spongebob@mymail.sutd.edu.sg\"; // Replace by your login\n\n      var myRainbowPassword = \"Kr@bbyP@tty69\"; // Replace by your password\n      // The SDK for Web is ready to be used, so you can sign in\n\n      rainbowSDK.connection.signin(myRainbowLogin, myRainbowPassword).then(function (account) {\n        // Successfully signed to Rainbow and the SDK is started completely. Rainbow data can be retrieved.\n        let onNewMessageReceived = function (event) {\n          let message = event.detail.message;\n          let conversation = event.detail.conversation;\n          let messageContent = \"\"; // Acknowledge it\n\n          rainbowSDK.im.markMessageFromConversationAsRead(conversation, message); // Text message received\n\n          messageContent = message.data; // Send an answer\n          // rainbowSDK.im.sendMessageToConversation(conversation, messageContent + \" read!\");\n\n          console.log(\"APSDOKAOPSDKPAOSKDP\");\n          let jid = \"3ef04d45a9784a61bc1868a07ff9cf6d@sandbox-all-in-one-rbx-prod-1.rainbow.sbg\"; // let myContact = rainbowSDK.contacts.getContactByJID(\"85f5342e76c44c219eeff89d2ee49483@sandbox-all-in-one-rbx-prod-1.rainbow.sbg\");\n          // console.log(myContact);\n\n          let myContact;\n          rainbowSDK.contacts.searchByJid(jid).then(contact => {\n            rainbowSDK.contacts.addToNetwork(contact).then(theContact => {\n              myContact = theContact;\n            }).then(err => {\n              console.log(err);\n            });\n          }).then(err => {\n            console.log(err);\n            rainbowSDK.conversations.openConversationForContact(myContact).then(conversation => {\n              rainbowSDK.im.sendMessageToConversation(conversation, \"It works!\");\n            }).catch(err => {\n              console.log(err);\n            });\n          });\n        };\n\n        document.addEventListener(rainbowSDK.im.RAINBOW_ONNEWIMMESSAGERECEIVED, onNewMessageReceived);\n      }).catch(function (err) {\n        // An error occurs (e.g. bad credentials). Application could be informed that sign in has failed\n        console.log(\"ERROR\");\n      }); // Listen when the SDK is ready\n\n      document.addEventListener(rainbowSDK.RAINBOW_ONREADY, this.onReady);\n    };\n\n    this.onLoaded = () => {\n      console.log('[Hello World] :: On SDK Loaded !');\n      rainbowSDK.initialize('82246ae05a3611eabf7e77d14e87b936', 'OLt1Qpu7fsCDNvT0r42waj0l4EeLe1Wb2nox0vpWGrpuqg4uunxwztDbJFAJKfwD').then(() => {\n        console.log('[Hello World] :: Rainbow SDK is initialized!');\n      }).catch(err => {\n        console.log('[Hello World] :: Something went wrong with the SDK.', err);\n      });\n    };\n\n    this.updateHistory = event => {\n      // send message code\n      event.preventDefault();\n      this.setState({\n        stored_value: event.target[0].value\n      });\n    };\n\n    this.login = (username, password, queryType) => {\n      console.log(username);\n      const customerCreds = {\n        username: username,\n        password: password,\n        queryType: queryType\n      };\n      console.log(customerCreds);\n      let route = 'http://localhost:3001/login/'.concat(username);\n      console.log(route);\n      let stateOfReq = \"false\";\n\n      while (stateOfReq == \"false\") {\n        axios.post(route, customerCreds).then(response => {\n          console.log(response.data);\n          stateOfReq = response.data.success;\n          let customerID = response.data.customer;\n          let agentID = response.data.agent;\n        }, error => {\n          console.log(error);\n        });\n      }\n\n      document.addEventListener(rainbowSDK.RAINBOW_ONREADY, this.onReady);\n      document.addEventListener(rainbowSDK.RAINBOW_ONLOADED, this.onLoaded);\n      rainbowSDK.start();\n      rainbowSDK.load();\n      this.setState({\n        loggedin: 1\n      });\n      console.log(\"logged in \");\n    };\n\n    this.signout = () => {\n      window.location.reload(true);\n    };\n\n    this.doSomethingBeforeUnload = () => {\n      // Do something\n      window.alert(\"Are you sure you want to close ? \");\n    };\n\n    this.setupBeforeUnloadListener = () => {\n      window.addEventListener(\"beforeunload\", ev => {\n        ev.preventDefault();\n        ev.returnValue(\"are you sure you want to leave\");\n        return this.doSomethingBeforeUnload();\n      });\n    };\n\n    this.test = () => {\n      if (this.state.loggedin == 0) {\n        return /*#__PURE__*/React.createElement(\"div\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 176,\n            columnNumber: 9\n          }\n        }, /*#__PURE__*/React.createElement(\"p\", {\n          classname: \"tc\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 177,\n            columnNumber: 11\n          }\n        }, this.state.message), /*#__PURE__*/React.createElement(Login_n, {\n          userInfo: this.state,\n          onSubmit: this.login,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 178,\n            columnNumber: 11\n          }\n        }));\n      } else {\n        return /*#__PURE__*/React.createElement(\"div\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 183,\n            columnNumber: 9\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: \"\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 184,\n            columnNumber: 11\n          }\n        }, /*#__PURE__*/React.createElement(Chatbox, {\n          history: this.state.history,\n          onMessage: this.updateHistory,\n          signOut: this.signout,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 184,\n            columnNumber: 29\n          }\n        })));\n      }\n    };\n\n    this.state = {\n      stored_value: \"Your Message will appear hear\",\n      loggedin: 0,\n      history: [],\n      userName: \"\",\n      password: \"\",\n      queryType: \"\",\n      message: \"\"\n    };\n  } // init rainbow sdk and set up listening\n\n\n  componentDidMount() {\n    // Activate the event listener\n    this.setupBeforeUnloadListener();\n  }\n\n  render() {\n    return this.test();\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["C:/Users/Jose Johnson/Desktop/KanScrubs/FRONTEND/src/App (2).js"],"names":["React","Chatbox","Login_n","axios","rainbowSDK","App","Component","constructor","onReady","myRainbowLogin","myRainbowPassword","connection","signin","then","account","onNewMessageReceived","event","message","detail","conversation","messageContent","im","markMessageFromConversationAsRead","data","console","log","jid","myContact","contacts","searchByJid","contact","addToNetwork","theContact","err","conversations","openConversationForContact","sendMessageToConversation","catch","document","addEventListener","RAINBOW_ONNEWIMMESSAGERECEIVED","RAINBOW_ONREADY","onLoaded","initialize","updateHistory","preventDefault","setState","stored_value","target","value","login","username","password","queryType","customerCreds","route","concat","stateOfReq","post","response","success","customerID","customer","agentID","agent","error","RAINBOW_ONLOADED","start","load","loggedin","signout","window","location","reload","doSomethingBeforeUnload","alert","setupBeforeUnloadListener","ev","returnValue","test","state","history","userName","componentDidMount","render"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport './App.css';\r\nimport Chatbox from \"./chat_ui/Chatbox\";\r\nimport \"tachyons\";\r\nimport Login_n from \"./login/Login_n\";\r\nimport axios from \"axios\";\r\nimport rainbowSDK from 'rainbow-web-sdk';\r\n\r\n\r\n\r\nclass App extends React.Component {\r\n  constructor() {\r\n    super();\r\n\r\n    this.state = {\r\n      stored_value: \"Your Message will appear hear\",\r\n      loggedin: 0,\r\n      history: [],\r\n      userName: \"\",\r\n      password: \"\",\r\n      queryType: \"\",\r\n      message: \"\",\r\n    }\r\n\r\n\r\n  }\r\n\r\n  // init rainbow sdk and set up listening\r\n  onReady = () => {\r\n\r\n    var myRainbowLogin = \"spongebob@mymail.sutd.edu.sg\";       // Replace by your login\r\n    var myRainbowPassword = \"Kr@bbyP@tty69\"; // Replace by your password\r\n\r\n    // The SDK for Web is ready to be used, so you can sign in\r\n    rainbowSDK.connection.signin(myRainbowLogin, myRainbowPassword)\r\n      .then(function (account) {\r\n        // Successfully signed to Rainbow and the SDK is started completely. Rainbow data can be retrieved.\r\n        let onNewMessageReceived = function (event) {\r\n\r\n          let message = event.detail.message;\r\n          let conversation = event.detail.conversation;\r\n          let messageContent = \"\";\r\n\r\n          // Acknowledge it\r\n          rainbowSDK.im.markMessageFromConversationAsRead(conversation, message);\r\n\r\n          // Text message received\r\n          messageContent = message.data;\r\n\r\n          // Send an answer\r\n          // rainbowSDK.im.sendMessageToConversation(conversation, messageContent + \" read!\");\r\n\r\n          console.log(\"APSDOKAOPSDKPAOSKDP\");\r\n          let jid = \"3ef04d45a9784a61bc1868a07ff9cf6d@sandbox-all-in-one-rbx-prod-1.rainbow.sbg\"\r\n          // let myContact = rainbowSDK.contacts.getContactByJID(\"85f5342e76c44c219eeff89d2ee49483@sandbox-all-in-one-rbx-prod-1.rainbow.sbg\");\r\n          // console.log(myContact);\r\n          let myContact;\r\n          rainbowSDK.contacts.searchByJid(jid).then((contact) => {\r\n            rainbowSDK.contacts.addToNetwork(contact).then((theContact) => {\r\n              myContact = theContact\r\n\r\n            }).then((err) => {\r\n              console.log(err);\r\n\r\n            })\r\n          }).then((err) => {\r\n            console.log(err)\r\n            rainbowSDK.conversations.openConversationForContact(myContact).then((conversation) => {\r\n              rainbowSDK.im.sendMessageToConversation(conversation, \"It works!\");\r\n            }).catch((err) => {\r\n              console.log(err)\r\n            })\r\n          })\r\n\r\n\r\n        };\r\n\r\n        document.addEventListener(rainbowSDK.im.RAINBOW_ONNEWIMMESSAGERECEIVED, onNewMessageReceived)\r\n\r\n      })\r\n      .catch(function (err) {\r\n        // An error occurs (e.g. bad credentials). Application could be informed that sign in has failed\r\n        console.log(\"ERROR\");\r\n      });\r\n\r\n\r\n    // Listen when the SDK is ready\r\n    document.addEventListener(rainbowSDK.RAINBOW_ONREADY, this.onReady)\r\n  };\r\n\r\n  onLoaded = () => {\r\n    console.log('[Hello World] :: On SDK Loaded !');\r\n\r\n    rainbowSDK\r\n      .initialize('82246ae05a3611eabf7e77d14e87b936', 'OLt1Qpu7fsCDNvT0r42waj0l4EeLe1Wb2nox0vpWGrpuqg4uunxwztDbJFAJKfwD')\r\n      .then(() => {\r\n        console.log('[Hello World] :: Rainbow SDK is initialized!');\r\n      })\r\n      .catch(err => {\r\n        console.log('[Hello World] :: Something went wrong with the SDK.', err);\r\n      });\r\n  };\r\n  updateHistory = (event) => {\r\n    // send message code\r\n    event.preventDefault();\r\n    this.setState({ stored_value: event.target[0].value });\r\n  };\r\n\r\n  login = (username, password, queryType) => {\r\n    console.log(username);\r\n    const customerCreds = {\r\n      username: username,\r\n      password: password,\r\n      queryType: queryType\r\n    }\r\n    console.log(customerCreds);\r\n    let route = 'http://localhost:3001/login/'.concat(username);\r\n    console.log(route);\r\n\r\n    let stateOfReq = \"false\";\r\n    while (stateOfReq == \"false\") {\r\n\r\n      axios.post(route, customerCreds)\r\n        .then((response) => {\r\n          console.log(response.data);\r\n          stateOfReq = response.data.success\r\n          let customerID = response.data.customer\r\n          let agentID = response.data.agent\r\n        }, (error) => {\r\n          console.log(error);\r\n        });\r\n    }\r\n\r\n    document.addEventListener(rainbowSDK.RAINBOW_ONREADY, this.onReady);\r\n\r\n    document.addEventListener(rainbowSDK.RAINBOW_ONLOADED, this.onLoaded);\r\n    rainbowSDK.start();\r\n    rainbowSDK.load();\r\n\r\n\r\n    this.setState({ loggedin: 1 });\r\n\r\n    console.log(\"logged in \")\r\n  };\r\n\r\n  signout = () => {\r\n    window.location.reload(true);\r\n  }\r\n\r\n  // Things to do before unloading/closing the tab\r\n  doSomethingBeforeUnload = () => {\r\n    // Do something\r\n    window.alert(\"Are you sure you want to close ? \")\r\n  }\r\n\r\n  // Setup the `beforeunload` event listener\r\n  setupBeforeUnloadListener = () => {\r\n    window.addEventListener(\"beforeunload\", (ev) => {\r\n      ev.preventDefault();\r\n\r\n      ev.returnValue(\"are you sure you want to leave\")\r\n      return this.doSomethingBeforeUnload();\r\n    });\r\n  };\r\n\r\n  componentDidMount() {\r\n    // Activate the event listener\r\n    this.setupBeforeUnloadListener();\r\n  }\r\n\r\n\r\n\r\n  test = () => {\r\n    if (this.state.loggedin == 0) {\r\n      return (\r\n        <div>\r\n          <p classname=\"tc\">{this.state.message}</p>\r\n          <Login_n userInfo={this.state} onSubmit={this.login} />\r\n        </div>\r\n      );\r\n    } else {\r\n      return (\r\n        <div>\r\n          <div className=\"\"><Chatbox history={this.state.history} onMessage={this.updateHistory} signOut={this.signout} /></div>\r\n        </div>\r\n      );\r\n    }\r\n\r\n  };\r\n\r\n\r\n  render() {\r\n    return (\r\n\r\n      this.test()\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n\r\n"]},"metadata":{},"sourceType":"module"}