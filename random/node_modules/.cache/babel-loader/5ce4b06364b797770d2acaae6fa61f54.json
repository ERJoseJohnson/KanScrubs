{"ast":null,"code":"'use strict';\n\nconst fetch = global.fetch || require('node-fetch');\n\nconst parse = require('@xmpp/xml/lib/parse');\n\nconst compareAltConnections = require('./alt-connections').compare;\n\nfunction resolve(domain) {\n  return fetch(`https://${domain}/.well-known/host-meta`).then(res => res.text()).then(res => {\n    return parse(res).getChildren('Link').filter(link => ['urn:xmpp:alt-connections:websocket', 'urn:xmpp:alt-connections:httppoll', 'urn:xmpp:alt-connections:xbosh'].includes(link.attrs.rel)).map(({\n      attrs\n    }) => ({\n      rel: attrs.rel,\n      href: attrs.href,\n      method: attrs.rel.split(':').pop(),\n      uri: attrs.href\n    })).sort(compareAltConnections);\n  }).catch(() => {\n    return [];\n  });\n}\n\nmodule.exports.resolve = resolve;","map":{"version":3,"sources":["C:/Users/Jose Johnson/Desktop/KanScrubs/random/node_modules/@xmpp/resolve/lib/http.js"],"names":["fetch","global","require","parse","compareAltConnections","compare","resolve","domain","then","res","text","getChildren","filter","link","includes","attrs","rel","map","href","method","split","pop","uri","sort","catch","module","exports"],"mappings":"AAAA;;AAEA,MAAMA,KAAK,GAAGC,MAAM,CAACD,KAAP,IAAgBE,OAAO,CAAC,YAAD,CAArC;;AACA,MAAMC,KAAK,GAAGD,OAAO,CAAC,qBAAD,CAArB;;AACA,MAAME,qBAAqB,GAAGF,OAAO,CAAC,mBAAD,CAAP,CAA6BG,OAA3D;;AAEA,SAASC,OAAT,CAAiBC,MAAjB,EAAyB;AACvB,SAAOP,KAAK,CAAE,WAAUO,MAAO,wBAAnB,CAAL,CACJC,IADI,CACCC,GAAG,IAAIA,GAAG,CAACC,IAAJ,EADR,EAEJF,IAFI,CAECC,GAAG,IAAI;AACX,WAAON,KAAK,CAACM,GAAD,CAAL,CACJE,WADI,CACQ,MADR,EAEJC,MAFI,CAEGC,IAAI,IACV,CACE,oCADF,EAEE,mCAFF,EAGE,gCAHF,EAIEC,QAJF,CAIWD,IAAI,CAACE,KAAL,CAAWC,GAJtB,CAHG,EASJC,GATI,CASA,CAAC;AAACF,MAAAA;AAAD,KAAD,MAAc;AACjBC,MAAAA,GAAG,EAAED,KAAK,CAACC,GADM;AAEjBE,MAAAA,IAAI,EAAEH,KAAK,CAACG,IAFK;AAGjBC,MAAAA,MAAM,EAAEJ,KAAK,CAACC,GAAN,CAAUI,KAAV,CAAgB,GAAhB,EAAqBC,GAArB,EAHS;AAIjBC,MAAAA,GAAG,EAAEP,KAAK,CAACG;AAJM,KAAd,CATA,EAeJK,IAfI,CAeCnB,qBAfD,CAAP;AAgBD,GAnBI,EAoBJoB,KApBI,CAoBE,MAAM;AACX,WAAO,EAAP;AACD,GAtBI,CAAP;AAuBD;;AAEDC,MAAM,CAACC,OAAP,CAAepB,OAAf,GAAyBA,OAAzB","sourcesContent":["'use strict'\r\n\r\nconst fetch = global.fetch || require('node-fetch')\r\nconst parse = require('@xmpp/xml/lib/parse')\r\nconst compareAltConnections = require('./alt-connections').compare\r\n\r\nfunction resolve(domain) {\r\n  return fetch(`https://${domain}/.well-known/host-meta`)\r\n    .then(res => res.text())\r\n    .then(res => {\r\n      return parse(res)\r\n        .getChildren('Link')\r\n        .filter(link =>\r\n          [\r\n            'urn:xmpp:alt-connections:websocket',\r\n            'urn:xmpp:alt-connections:httppoll',\r\n            'urn:xmpp:alt-connections:xbosh',\r\n          ].includes(link.attrs.rel)\r\n        )\r\n        .map(({attrs}) => ({\r\n          rel: attrs.rel,\r\n          href: attrs.href,\r\n          method: attrs.rel.split(':').pop(),\r\n          uri: attrs.href,\r\n        }))\r\n        .sort(compareAltConnections)\r\n    })\r\n    .catch(() => {\r\n      return []\r\n    })\r\n}\r\n\r\nmodule.exports.resolve = resolve\r\n"]},"metadata":{},"sourceType":"script"}