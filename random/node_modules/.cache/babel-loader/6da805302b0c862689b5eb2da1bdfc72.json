{"ast":null,"code":"'use strict';\n\nconst Socket = require('./Socket');\n\nconst Connection = require('@xmpp/connection');\n\nconst xml = require('@xmpp/xml');\n\nconst FramedParser = require('./FramedParser');\n\nconst NS_FRAMING = 'urn:ietf:params:xml:ns:xmpp-framing';\n/* References\r\n * WebSocket protocol https://tools.ietf.org/html/rfc6455\r\n * WebSocket Web API https://html.spec.whatwg.org/multipage/comms.html#network\r\n * XMPP over WebSocket https://tools.ietf.org/html/rfc7395\r\n */\n\nclass ConnectionWebSocket extends Connection {\n  send(element, ...args) {\n    if (!element.attrs.xmlns && super.isStanza(element)) {\n      element.attrs.xmlns = 'jabber:client';\n    }\n\n    return super.send(element, ...args);\n  } // https://tools.ietf.org/html/rfc7395#section-3.6\n\n\n  footerElement() {\n    return new xml.Element('close', {\n      xmlns: NS_FRAMING\n    });\n  } // https://tools.ietf.org/html/rfc7395#section-3.4\n\n\n  headerElement() {\n    const el = super.headerElement();\n    el.name = 'open';\n    el.attrs.xmlns = NS_FRAMING;\n    return el;\n  }\n\n  socketParameters(service) {\n    return service.match(/^wss?:\\/\\//) ? service : undefined;\n  }\n\n}\n\nConnectionWebSocket.prototype.Socket = Socket;\nConnectionWebSocket.prototype.NS = 'jabber:client';\nConnectionWebSocket.prototype.Parser = FramedParser;\nmodule.exports = ConnectionWebSocket;","map":{"version":3,"sources":["C:/Users/Jose Johnson/Desktop/KanScrubs/random/node_modules/@xmpp/websocket/lib/Connection.js"],"names":["Socket","require","Connection","xml","FramedParser","NS_FRAMING","ConnectionWebSocket","send","element","args","attrs","xmlns","isStanza","footerElement","Element","headerElement","el","name","socketParameters","service","match","undefined","prototype","NS","Parser","module","exports"],"mappings":"AAAA;;AAEA,MAAMA,MAAM,GAAGC,OAAO,CAAC,UAAD,CAAtB;;AACA,MAAMC,UAAU,GAAGD,OAAO,CAAC,kBAAD,CAA1B;;AACA,MAAME,GAAG,GAAGF,OAAO,CAAC,WAAD,CAAnB;;AACA,MAAMG,YAAY,GAAGH,OAAO,CAAC,gBAAD,CAA5B;;AAEA,MAAMI,UAAU,GAAG,qCAAnB;AAEA;;;;;;AAMA,MAAMC,mBAAN,SAAkCJ,UAAlC,CAA6C;AAC3CK,EAAAA,IAAI,CAACC,OAAD,EAAU,GAAGC,IAAb,EAAmB;AACrB,QAAI,CAACD,OAAO,CAACE,KAAR,CAAcC,KAAf,IAAwB,MAAMC,QAAN,CAAeJ,OAAf,CAA5B,EAAqD;AACnDA,MAAAA,OAAO,CAACE,KAAR,CAAcC,KAAd,GAAsB,eAAtB;AACD;;AAED,WAAO,MAAMJ,IAAN,CAAWC,OAAX,EAAoB,GAAGC,IAAvB,CAAP;AACD,GAP0C,CAS3C;;;AACAI,EAAAA,aAAa,GAAG;AACd,WAAO,IAAIV,GAAG,CAACW,OAAR,CAAgB,OAAhB,EAAyB;AAC9BH,MAAAA,KAAK,EAAEN;AADuB,KAAzB,CAAP;AAGD,GAd0C,CAgB3C;;;AACAU,EAAAA,aAAa,GAAG;AACd,UAAMC,EAAE,GAAG,MAAMD,aAAN,EAAX;AACAC,IAAAA,EAAE,CAACC,IAAH,GAAU,MAAV;AACAD,IAAAA,EAAE,CAACN,KAAH,CAASC,KAAT,GAAiBN,UAAjB;AACA,WAAOW,EAAP;AACD;;AAEDE,EAAAA,gBAAgB,CAACC,OAAD,EAAU;AACxB,WAAOA,OAAO,CAACC,KAAR,CAAc,YAAd,IAA8BD,OAA9B,GAAwCE,SAA/C;AACD;;AA1B0C;;AA6B7Cf,mBAAmB,CAACgB,SAApB,CAA8BtB,MAA9B,GAAuCA,MAAvC;AACAM,mBAAmB,CAACgB,SAApB,CAA8BC,EAA9B,GAAmC,eAAnC;AACAjB,mBAAmB,CAACgB,SAApB,CAA8BE,MAA9B,GAAuCpB,YAAvC;AAEAqB,MAAM,CAACC,OAAP,GAAiBpB,mBAAjB","sourcesContent":["'use strict'\r\n\r\nconst Socket = require('./Socket')\r\nconst Connection = require('@xmpp/connection')\r\nconst xml = require('@xmpp/xml')\r\nconst FramedParser = require('./FramedParser')\r\n\r\nconst NS_FRAMING = 'urn:ietf:params:xml:ns:xmpp-framing'\r\n\r\n/* References\r\n * WebSocket protocol https://tools.ietf.org/html/rfc6455\r\n * WebSocket Web API https://html.spec.whatwg.org/multipage/comms.html#network\r\n * XMPP over WebSocket https://tools.ietf.org/html/rfc7395\r\n */\r\n\r\nclass ConnectionWebSocket extends Connection {\r\n  send(element, ...args) {\r\n    if (!element.attrs.xmlns && super.isStanza(element)) {\r\n      element.attrs.xmlns = 'jabber:client'\r\n    }\r\n\r\n    return super.send(element, ...args)\r\n  }\r\n\r\n  // https://tools.ietf.org/html/rfc7395#section-3.6\r\n  footerElement() {\r\n    return new xml.Element('close', {\r\n      xmlns: NS_FRAMING,\r\n    })\r\n  }\r\n\r\n  // https://tools.ietf.org/html/rfc7395#section-3.4\r\n  headerElement() {\r\n    const el = super.headerElement()\r\n    el.name = 'open'\r\n    el.attrs.xmlns = NS_FRAMING\r\n    return el\r\n  }\r\n\r\n  socketParameters(service) {\r\n    return service.match(/^wss?:\\/\\//) ? service : undefined\r\n  }\r\n}\r\n\r\nConnectionWebSocket.prototype.Socket = Socket\r\nConnectionWebSocket.prototype.NS = 'jabber:client'\r\nConnectionWebSocket.prototype.Parser = FramedParser\r\n\r\nmodule.exports = ConnectionWebSocket\r\n"]},"metadata":{},"sourceType":"script"}