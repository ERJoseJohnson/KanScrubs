{"ast":null,"code":"'use strict';\n\nvar EventEmitter = require('events').EventEmitter;\n\nvar inherits = require('inherits');\n\nvar Element = require('./Element');\n\nvar LtxParser = require('./parsers/ltx');\n\nvar Parser = function (options) {\n  EventEmitter.call(this);\n  var ParserInterface = this.Parser = options && options.Parser || this.DefaultParser;\n  var ElementInterface = this.Element = options && options.Element || this.DefaultElement;\n  this.parser = new ParserInterface();\n  var el;\n  var self = this;\n  this.parser.on('startElement', function (name, attrs) {\n    var child = new ElementInterface(name, attrs);\n\n    if (!el) {\n      el = child;\n    } else {\n      el = el.cnode(child);\n    }\n  });\n  this.parser.on('endElement', function (name) {\n    if (!el) {\n      /* Err */\n    } else if (name === el.name) {\n      if (el.parent) {\n        el = el.parent;\n      } else if (!self.tree) {\n        self.tree = el;\n        el = undefined;\n      }\n    }\n  });\n  this.parser.on('text', function (str) {\n    if (el) {\n      el.t(str);\n    }\n  });\n  this.parser.on('error', function (e) {\n    self.error = e;\n    self.emit('error', e);\n  });\n};\n\ninherits(Parser, EventEmitter);\nParser.prototype.DefaultParser = LtxParser;\nParser.prototype.DefaultElement = Element;\n\nParser.prototype.write = function (data) {\n  this.parser.write(data);\n};\n\nParser.prototype.end = function (data) {\n  this.parser.end(data);\n\n  if (!this.error) {\n    if (this.tree) {\n      this.emit('tree', this.tree);\n    } else {\n      this.emit('error', new Error('Incomplete document'));\n    }\n  }\n};\n\nmodule.exports = Parser;","map":{"version":3,"sources":["C:/Users/Jose Johnson/Desktop/KanScrubs/random/node_modules/ltx/lib/Parser.js"],"names":["EventEmitter","require","inherits","Element","LtxParser","Parser","options","call","ParserInterface","DefaultParser","ElementInterface","DefaultElement","parser","el","self","on","name","attrs","child","cnode","parent","tree","undefined","str","t","e","error","emit","prototype","write","data","end","Error","module","exports"],"mappings":"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","sourcesContent":["'use strict'\r\n\r\nvar EventEmitter = require('events').EventEmitter\r\nvar inherits = require('inherits')\r\nvar Element = require('./Element')\r\nvar LtxParser = require('./parsers/ltx')\r\n\r\nvar Parser = function (options) {\r\n  EventEmitter.call(this)\r\n\r\n  var ParserInterface = this.Parser = (options && options.Parser) || this.DefaultParser\r\n  var ElementInterface = this.Element = (options && options.Element) || this.DefaultElement\r\n\r\n  this.parser = new ParserInterface()\r\n\r\n  var el\r\n  var self = this\r\n  this.parser.on('startElement', function (name, attrs) {\r\n    var child = new ElementInterface(name, attrs)\r\n    if (!el) {\r\n      el = child\r\n    } else {\r\n      el = el.cnode(child)\r\n    }\r\n  })\r\n  this.parser.on('endElement', function (name) {\r\n    if (!el) {\r\n      /* Err */\r\n    } else if (name === el.name) {\r\n      if (el.parent) {\r\n        el = el.parent\r\n      } else if (!self.tree) {\r\n        self.tree = el\r\n        el = undefined\r\n      }\r\n    }\r\n  })\r\n  this.parser.on('text', function (str) {\r\n    if (el) {\r\n      el.t(str)\r\n    }\r\n  })\r\n  this.parser.on('error', function (e) {\r\n    self.error = e\r\n    self.emit('error', e)\r\n  })\r\n}\r\n\r\ninherits(Parser, EventEmitter)\r\n\r\nParser.prototype.DefaultParser = LtxParser\r\n\r\nParser.prototype.DefaultElement = Element\r\n\r\nParser.prototype.write = function (data) {\r\n  this.parser.write(data)\r\n}\r\n\r\nParser.prototype.end = function (data) {\r\n  this.parser.end(data)\r\n\r\n  if (!this.error) {\r\n    if (this.tree) {\r\n      this.emit('tree', this.tree)\r\n    } else {\r\n      this.emit('error', new Error('Incomplete document'))\r\n    }\r\n  }\r\n}\r\n\r\nmodule.exports = Parser\r\n"]},"metadata":{},"sourceType":"script"}