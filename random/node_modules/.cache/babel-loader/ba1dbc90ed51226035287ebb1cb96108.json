{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n}); // Constructor\n\nclass Offer {\n  constructor(id, name, description, offerReference, profileId, canBeSold, businessModel, isDefault, isExclusive, isPrepaid, prepaidDuration) {\n    this.id = id;\n    this.name = name;\n    this.description = description;\n    this.offerReference = offerReference;\n    this.profileId = profileId;\n    this.canBeSold = canBeSold ? canBeSold : false;\n    this.businessModel = businessModel;\n    this.isPrepaid = isPrepaid;\n    this.prepaidDuration = prepaidDuration;\n    this.isDefault = isDefault;\n    this.isExclusive = isExclusive;\n    var offerName = this.name.toLowerCase(); //check name in order to show the right logo\n\n    if (offerName) {\n      if (offerName.indexOf(\"enterprise\") !== -1) {\n        offerName = \"enterprise\";\n      } else if (offerName.indexOf(\"business\") !== -1) {\n        offerName = \"business\";\n      } else if (offerName.indexOf(\"conference\") !== -1) {\n        offerName = \"conference\";\n      }\n    }\n\n    this.logo = \"logo-offer-\" + offerName + \".svg\";\n\n    this.isEnterprise = function () {\n      return this.name.toLowerCase().startsWith(\"enterprise\");\n    };\n\n    this.isBusiness = function () {\n      return this.name.toLowerCase().startsWith(\"business\");\n    };\n\n    this.isEssential = function () {\n      return this.name.toLowerCase().startsWith(\"essential\");\n    };\n  }\n\n  static isExclusive(offer) {\n    return false;\n  }\n\n}\n\nexports.Offer = Offer;\n\nclass OfferManager {\n  constructor() {} // Comparator\n\n\n  offerComparator(offer1, offer2) {\n    var offerOrder = [\"Essential\", \"Business\", \"Enterprise\"];\n    var orderIndex1 = offerOrder.findIndex(function (order) {\n      return offer1.name.startsWith(order); // \"Enterprise demo\" and \"enterprise\" must have the same index\n    });\n    var orderIndex2 = offerOrder.findIndex(function (order) {\n      return offer2.name.startsWith(order); // \"Enterprise demo\" and \"enterprise\" must have the same index\n    }); // unknown offers are grouped at the bottom\n\n    orderIndex1 = orderIndex1 === -1 ? offerOrder.length : orderIndex1;\n    orderIndex2 = orderIndex2 === -1 ? offerOrder.length : orderIndex2;\n\n    if (orderIndex1 < orderIndex2) {\n      return -1;\n    }\n\n    if (orderIndex1 > orderIndex2) {\n      return 1;\n    } // offer 1 and 2 have same order index\n    // reverse sort them by name (ie. \"enterprise demo\" before \"enterprise\")\n\n\n    if (offer1.name > offer2.name) {\n      return orderIndex1 === offerOrder.length ? 1 : -1;\n    }\n\n    if (offer1.name < offer2.name) {\n      return orderIndex1 === offerOrder.length ? -1 : 1;\n    }\n\n    return 0;\n  } // Filters\n\n\n  isExclusive(offer) {\n    return offer.isDefault || offer.isExclusive; // like \"Essential\" (default) or \"Enterprise\" // nb_users (like \"Beta\") or undefined (like \"Essential\")\n  }\n\n  isOptional(offer) {\n    return !Offer.isExclusive(offer);\n  }\n\n  isEssential(offer) {\n    return offer.isEssential();\n  }\n\n  isNotEssential(offer) {\n    return !offer.isEssential();\n  }\n\n  isModelByNbUser(offer) {\n    return offer.businessModel === \"nb_users\";\n  }\n\n  isPrepaid(offer) {\n    return offer.isPrepaid;\n  }\n\n  isNotPrepaid(offer) {\n    return !offer.isPrepaid;\n  }\n\n  createOfferFromData(data) {\n    return new Offer(data.id, data.name, data.description, data.offerReference, data.profileId, data.canBeSold, data.businessModel, data.isDefault, data.isExclusive, data.isPrepaid, data.prepaidDuration);\n  }\n\n  createOfferFromSubscriptionData(subscription) {\n    return new Offer(subscription.offerId, subscription.offerName, subscription.offerReference, undefined, subscription.profileId, subscription.canBeSold, subscription.businessModel, subscription.isDefault, subscription.isExclusive, subscription.isPrepaid, undefined);\n  }\n\n  createOfferFromProfileData(profile) {\n    return new Offer(profile.offerId, profile.offerName, undefined, undefined, profile.profileId, false, undefined, profile.isDefault, profile.isExclusive, profile.isPrepaid, profile.prepaidDuration);\n  }\n\n}\n\nlet offerManager = new OfferManager();\nexports.offerManager = offerManager;\nmodule.exports = {\n  'Offer': Offer,\n  'offerManager': offerManager\n};","map":{"version":3,"sources":["../../../src/lib/common/models/Offer.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n// Constructor\r\nclass Offer {\r\n    constructor(id, name, description, offerReference, profileId, canBeSold, businessModel, isDefault, isExclusive, isPrepaid, prepaidDuration) {\r\n        this.id = id;\r\n        this.name = name;\r\n        this.description = description;\r\n        this.offerReference = offerReference;\r\n        this.profileId = profileId;\r\n        this.canBeSold = canBeSold ? canBeSold : false;\r\n        this.businessModel = businessModel;\r\n        this.isPrepaid = isPrepaid;\r\n        this.prepaidDuration = prepaidDuration;\r\n        this.isDefault = isDefault;\r\n        this.isExclusive = isExclusive;\r\n        var offerName = this.name.toLowerCase();\r\n        //check name in order to show the right logo\r\n        if (offerName) {\r\n            if (offerName.indexOf(\"enterprise\") !== -1) {\r\n                offerName = \"enterprise\";\r\n            }\r\n            else if (offerName.indexOf(\"business\") !== -1) {\r\n                offerName = \"business\";\r\n            }\r\n            else if (offerName.indexOf(\"conference\") !== -1) {\r\n                offerName = \"conference\";\r\n            }\r\n        }\r\n        this.logo = \"logo-offer-\" + offerName + \".svg\";\r\n        this.isEnterprise = function () {\r\n            return this.name.toLowerCase().startsWith(\"enterprise\");\r\n        };\r\n        this.isBusiness = function () {\r\n            return this.name.toLowerCase().startsWith(\"business\");\r\n        };\r\n        this.isEssential = function () {\r\n            return this.name.toLowerCase().startsWith(\"essential\");\r\n        };\r\n    }\r\n    static isExclusive(offer) {\r\n        return false;\r\n    }\r\n}\r\nexports.Offer = Offer;\r\nclass OfferManager {\r\n    constructor() {\r\n    }\r\n    // Comparator\r\n    offerComparator(offer1, offer2) {\r\n        var offerOrder = [\"Essential\", \"Business\", \"Enterprise\"];\r\n        var orderIndex1 = offerOrder.findIndex(function (order) {\r\n            return offer1.name.startsWith(order); // \"Enterprise demo\" and \"enterprise\" must have the same index\r\n        });\r\n        var orderIndex2 = offerOrder.findIndex(function (order) {\r\n            return offer2.name.startsWith(order); // \"Enterprise demo\" and \"enterprise\" must have the same index\r\n        });\r\n        // unknown offers are grouped at the bottom\r\n        orderIndex1 = orderIndex1 === -1 ? offerOrder.length : orderIndex1;\r\n        orderIndex2 = orderIndex2 === -1 ? offerOrder.length : orderIndex2;\r\n        if (orderIndex1 < orderIndex2) {\r\n            return -1;\r\n        }\r\n        if (orderIndex1 > orderIndex2) {\r\n            return 1;\r\n        }\r\n        // offer 1 and 2 have same order index\r\n        // reverse sort them by name (ie. \"enterprise demo\" before \"enterprise\")\r\n        if (offer1.name > offer2.name) {\r\n            return orderIndex1 === offerOrder.length ? 1 : -1;\r\n        }\r\n        if (offer1.name < offer2.name) {\r\n            return orderIndex1 === offerOrder.length ? -1 : 1;\r\n        }\r\n        return 0;\r\n    }\r\n    // Filters\r\n    isExclusive(offer) {\r\n        return offer.isDefault || offer.isExclusive; // like \"Essential\" (default) or \"Enterprise\" // nb_users (like \"Beta\") or undefined (like \"Essential\")\r\n    }\r\n    isOptional(offer) {\r\n        return !Offer.isExclusive(offer);\r\n    }\r\n    isEssential(offer) {\r\n        return offer.isEssential();\r\n    }\r\n    isNotEssential(offer) {\r\n        return !offer.isEssential();\r\n    }\r\n    isModelByNbUser(offer) {\r\n        return offer.businessModel === \"nb_users\";\r\n    }\r\n    isPrepaid(offer) {\r\n        return offer.isPrepaid;\r\n    }\r\n    isNotPrepaid(offer) {\r\n        return !offer.isPrepaid;\r\n    }\r\n    createOfferFromData(data) {\r\n        return new Offer(data.id, data.name, data.description, data.offerReference, data.profileId, data.canBeSold, data.businessModel, data.isDefault, data.isExclusive, data.isPrepaid, data.prepaidDuration);\r\n    }\r\n    createOfferFromSubscriptionData(subscription) {\r\n        return new Offer(subscription.offerId, subscription.offerName, subscription.offerReference, undefined, subscription.profileId, subscription.canBeSold, subscription.businessModel, subscription.isDefault, subscription.isExclusive, subscription.isPrepaid, undefined);\r\n    }\r\n    createOfferFromProfileData(profile) {\r\n        return new Offer(profile.offerId, profile.offerName, undefined, undefined, profile.profileId, false, undefined, profile.isDefault, profile.isExclusive, profile.isPrepaid, profile.prepaidDuration);\r\n    }\r\n}\r\nlet offerManager = new OfferManager();\r\nexports.offerManager = offerManager;\r\nmodule.exports = {\r\n    'Offer': Offer,\r\n    'offerManager': offerManager\r\n};\r\n//# sourceMappingURL=Offer.js.map"]},"metadata":{},"sourceType":"script"}